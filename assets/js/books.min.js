const btn=document.getElementById("search-btn");async function searchBooks(o){const t=await fetch(`https://openlibrary.org/search.json?q=${o}&fields=key,title,author_name,author_key,first_sentence,cover_i,ebook_access,has_fulltext,ia&limit=12`);renderBooks(formatBooks((await t.json()).docs))}function formatBooks(o){const t=[];return o.forEach((o=>{const e=o.key.replace("/works/",""),n=[];o.author_name&&o.author_name.forEach(((t,e)=>{n.push({name:t,photo:`https://covers.openlibrary.org/a/olid/${o.author_key[e]}-L.jpg`})}));const s=o.has_fulltext?`https://openlibrary.org/borrow/ia/${o.ia[0]}?ref=ol`:"";t.push({key:e,title:o.title,authors:n,cover:`https://covers.openlibrary.org/b/id/${o.cover_i}-L.jpg`,readLink:s})})),t}function scrollToBooksList(){document.getElementById("books-mark").scrollIntoView({behavior:"smooth"})}function renderBooks(o){let t="";o.forEach((o=>{t+=bookHTML(o)})),document.getElementById("books-list").innerHTML=t}function bookHTML(o){const t=o.authors?o.authors.map((o=>o.name)).join(", "):"";return`\n  <div class="api-grid">\n  <img src="${o.cover}" class="img-top" alt="${o.title}">\n      <div class="card-info">\n          <h5 class="card-title">${o.title}</h5>\n          <p class="card-text"><b>Author(s):</b> ${t}</p>\n      </div>\n  </div>\n  `}btn.onclick=function(){const o=document.getElementById("bookTitle").value;""!==o&&(searchBooks(o),scrollToBooksList())};